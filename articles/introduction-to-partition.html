<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to Partition • partition</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Partition">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">partition</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction-to-partition.html">An Introduction to partition</a>
    </li>
    <li>
      <a href="../articles/extending-partition.html">Extending partition</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USCbiostats/partition">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to Partition</h1>
                        <h4 class="author">Malcolm Barrett</h4>
            
            <h4 class="date">2020-02-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USCbiostats/partition/blob/master/vignettes/introduction-to-partition.Rmd"><code>vignettes/introduction-to-partition.Rmd</code></a></small>
      <div class="hidden name"><code>introduction-to-partition.Rmd</code></div>

    </div>

    
    
<div id="introduction-to-the-partition-package" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-to-the-partition-package" class="anchor"></a>Introduction to the partition package</h2>
<p>partition is a fast and flexible data reduction framework <span class="citation">(Millstein et al. 2020)</span> that uses an approach called Direct-Measure-Reduce to create agglomerative partitions that maintain the user-specified minimum level of information. Each variable starts of as its own cluster; potential reduced variables are assessed by making sure this level of information is maintained. The reduced variables are also interpretable: original variables map to one and only one variable in the reduced data set. partition is flexible, as well: how variables are selected to reduce, how information loss is measured, and the way data is reduced can all be customized.</p>
<p>partition is particularly useful for highly correlated data, such as genetic data, where there is a lot of redundancy in the information each variable lends. <code><a href="../reference/simulate_block_data.html">simulate_block_data()</a></code> simulates data like this: blocks of correlated data that are themselves independent of the other blocks in the data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(partition)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">1234</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># create a 100 x 15 data set with 3 blocks</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/simulate_block_data.html">simulate_block_data</a></span>(</span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="co"># create 3 correlated blocks of 5 variables each</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="dt">block_sizes =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb1-8"><a href="#cb1-8"></a>  <span class="dt">lower_corr =</span> <span class="fl">.4</span>,</span>
<span id="cb1-9"><a href="#cb1-9"></a>  <span class="dt">upper_corr =</span> <span class="fl">.6</span>,</span>
<span id="cb1-10"><a href="#cb1-10"></a>  <span class="dt">n =</span> <span class="dv">100</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>)</span>
<span id="cb1-12"><a href="#cb1-12"></a></span>
<span id="cb1-13"><a href="#cb1-13"></a>df</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co">#&gt; # A tibble: 100 x 15</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="co">#&gt;    block1_x1 block1_x2 block1_x3 block1_x4 block1_x5 block2_x1 block2_x2</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">#&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co">#&gt;  1   -0.306     -0.187    -1.82    -0.533    -0.547     1.71     -0.642 </span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co">#&gt;  2   -1.40      -0.179    -1.79    -1.01     -0.839    -0.0401    0.770 </span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="co">#&gt;  3    1.35       1.27      0.938    1.54      1.38     -0.0359    0.278 </span></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="co">#&gt;  4    0.941      0.786     0.587   -0.0181    0.0350   -0.172    -0.106 </span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="co">#&gt;  5    0.917      0.294     0.357   -0.711    -1.08     -0.674    -0.0997</span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="co">#&gt;  6   -0.573      0.159    -0.870   -1.14     -0.272     0.331    -0.583 </span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="co">#&gt;  7   -0.157      1.62      0.876   -0.0377    0.179     0.278    -0.839 </span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="co">#&gt;  8   -0.0469    -1.11     -0.359    0.132    -2.07     -0.809     1.33  </span></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="co">#&gt;  9   -0.375     -0.354     0.562   -1.14     -0.131    -1.53     -1.87  </span></span>
<span id="cb1-26"><a href="#cb1-26"></a><span class="co">#&gt; 10   -0.680      0.560    -0.687    0.290    -0.672    -0.580     0.0525</span></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="co">#&gt; # … with 90 more rows, and 8 more variables: block2_x3 &lt;dbl&gt;, block2_x4 &lt;dbl&gt;,</span></span>
<span id="cb1-28"><a href="#cb1-28"></a><span class="co">#&gt; #   block2_x5 &lt;dbl&gt;, block3_x1 &lt;dbl&gt;, block3_x2 &lt;dbl&gt;, block3_x3 &lt;dbl&gt;,</span></span>
<span id="cb1-29"><a href="#cb1-29"></a><span class="co">#&gt; #   block3_x4 &lt;dbl&gt;, block3_x5 &lt;dbl&gt;</span></span></code></pre></div>
<p>partition takes a data frame and a threshold–the minimum amount of information a reduced variable must explain to be created–and reduces the data to as few variables as possible. The threshold prevents information loss: each reduced variable must still explain at least that much.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>prt &lt;-<span class="st"> </span><span class="kw"><a href="../reference/partition.html">partition</a></span>(df, <span class="dt">threshold =</span> <span class="fl">.5</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>prt</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; Partitioner:</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt;    Director: Minimum Distance (Pearson) </span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt;    Metric: Intraclass Correlation </span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt;    Reducer: Scaled Mean</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; </span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; Reduced Variables:</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; 4 reduced variables created from 10 observed variables</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt; </span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt; Mappings:</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt; reduced_var_1 = {block3_x1, block3_x2, block3_x3}</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt; reduced_var_2 = {block1_x1, block1_x2, block1_x5}</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt; reduced_var_3 = {block2_x2, block2_x5}</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt; reduced_var_4 = {block2_x1, block2_x4}</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt; </span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt; Minimum information:</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt; 0.501</span></span></code></pre></div>
<p>partition creates a <code>tibble</code> with the newly reduced variables:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="../reference/partition_scores.html">partition_scores</a></span>(prt)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; # A tibble: 100 x 9</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;    block1_x3 block1_x4 block2_x3 block3_x4 block3_x5 reduced_var_1 reduced_var_2</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt;  1    -1.82    -0.533     0.665     0.884      0.245        0.869         -0.289</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt;  2    -1.79    -1.01      0.468     1.96       0.463       -0.460         -0.834</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt;  3     0.938    1.54     -0.142     0.0903    -1.64        -0.357          1.70 </span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt;  4     0.587   -0.0181   -0.824    -1.34      -1.20        -2.07           0.815</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;  5     0.357   -0.711     0.230     0.874     -1.70         0.205          0.172</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;  6    -0.870   -1.14     -1.24     -0.289     -0.406        0.0871        -0.149</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;  7     0.876   -0.0377   -1.27     -2.50      -1.53        -2.96           0.768</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt;  8    -0.359    0.132     0.0977    0.109     -0.152       -0.828         -1.15 </span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;  9     0.562   -1.14     -1.01      0.953     -1.28         0.745         -0.218</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt; 10    -0.687    0.290     0.605    -1.91      -1.07        -0.645         -0.192</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt; # … with 90 more rows, and 2 more variables: reduced_var_3 &lt;dbl&gt;,</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; #   reduced_var_4 &lt;dbl&gt;</span></span></code></pre></div>
<p>Each variable in the original data set maps to one reduced variable; in this partition, there are four reduced variables consisting of two to three variables each, as well as five of the original variables that did not get reduced because too much information would have been lost.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="../reference/plot_partitions.html">plot_ncluster</a></span>(prt) <span class="op">+</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="st">  </span><span class="co"># plot_*() functions return ggplots, so they can be extended using ggplot2</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>(<span class="dv">14</span>)</span></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Each reduced variable explains at least 50% of the information of the original variables from which it was created. The distribution of information has a lower limit of our threshold, .5.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="../reference/plot_partitions.html">plot_information</a></span>(prt, <span class="dt">geom =</span> geom_histogram) <span class="op">+</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>(<span class="dv">14</span>)</span></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></p>
<p>A key for these mappings and the information each variable explains can be retrieved with <code><a href="../reference/mapping_key.html">mapping_key()</a></code>, which returns a nested <code>tibble</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="../reference/mapping_key.html">mapping_key</a></span>(prt)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#&gt; # A tibble: 9 x 4</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#&gt;   variable      mapping   information indices  </span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;list&gt;          &lt;dbl&gt; &lt;list&gt;   </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt; 1 block1_x3     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt; 2 block1_x4     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt; 3 block2_x3     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt; 4 block3_x4     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt; 5 block3_x5     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt; 6 reduced_var_1 &lt;chr [3]&gt;       0.520 &lt;int [3]&gt;</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt; 7 reduced_var_2 &lt;chr [3]&gt;       0.501 &lt;int [3]&gt;</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt; 8 reduced_var_3 &lt;chr [2]&gt;       0.534 &lt;int [2]&gt;</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt; 9 reduced_var_4 &lt;chr [2]&gt;       0.514 &lt;int [2]&gt;</span></span></code></pre></div>
<p>To see each individual mapping, you can unnest them using <code><a href="../reference/mapping_key.html">unnest_mappings()</a></code> (or do it yourself with <code><a href="https://tidyr.tidyverse.org/reference/nest.html">tidyr::unnest()</a></code>)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="../reference/mapping_key.html">unnest_mappings</a></span>(prt)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">#&gt; # A tibble: 15 x 4</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co">#&gt;    variable      mapping   information indices</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;           &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt;  1 block1_x3     block1_x3       1           3</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">#&gt;  2 block1_x4     block1_x4       1           4</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">#&gt;  3 block2_x3     block2_x3       1           8</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt;  4 block3_x4     block3_x4       1          14</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt;  5 block3_x5     block3_x5       1          15</span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;  6 reduced_var_1 block3_x1       0.520      11</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt;  7 reduced_var_1 block3_x2       0.520      12</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;  8 reduced_var_1 block3_x3       0.520      13</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;  9 reduced_var_2 block1_x1       0.501       1</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt; 10 reduced_var_2 block1_x2       0.501       2</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt; 11 reduced_var_2 block1_x5       0.501       5</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt; 12 reduced_var_3 block2_x2       0.534       7</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt; 13 reduced_var_3 block2_x5       0.534      10</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt; 14 reduced_var_4 block2_x1       0.514       6</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; 15 reduced_var_4 block2_x4       0.514       9</span></span></code></pre></div>
</div>
<div id="direct-measure-reduce-and-partitioners" class="section level2">
<h2 class="hasAnchor">
<a href="#direct-measure-reduce-and-partitioners" class="anchor"></a>Direct-Measure-Reduce and Partitioners</h2>
<p>Partitioners are functions that tell the partition algorithm 1) what to try to reduce 2) how to measure how much information is lost from the reduction and 3) how to reduce the data. We call this approach Direct-Measure-Reduce. In partition, functions that handle 1) are thus called directors, functions that handle 2) are called metrics, and functions that handle 3) are called reducers. partition has a number of pre-specified partitioners for agglomerative data reduction, but this approach is also quite flexible. See the <a href="extending-partition.html">vignette on extending partition</a> to learn more about custom partitioners.</p>
<p>The default partitioner in <code><a href="../reference/partition.html">partition()</a></code> is <code><a href="../reference/part_icc.html">part_icc()</a></code>. <code><a href="../reference/part_icc.html">part_icc()</a></code> uses a correlation-based distance matrix to find the pair of variables with the smallest distance between them, intraclass correlation (ICC) to measure information explained by the reduced variable, and scaled row means to reduce variables with a sufficient minimum ICC. <code><a href="../reference/part_icc.html">part_icc()</a></code> is generally fast and scalable.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="../reference/part_icc.html">part_icc</a></span>()</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co">#&gt;    Director: Minimum Distance (Pearson) </span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt;    Metric: Intraclass Correlation </span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt;    Reducer: Scaled Mean</span></span></code></pre></div>
<p>There are several other partitioners, which all have names in the format <code>part_*()</code></p>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">partitioner</th>
<th align="left">direct</th>
<th align="left">measure</th>
<th align="left">reduce</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code><a href="../reference/part_icc.html">part_icc()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">ICC</td>
<td align="left">scaled row means</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/part_kmeans.html">part_kmeans()</a></code></td>
<td align="left">K-Means Clusters</td>
<td align="left">Minimum ICC</td>
<td align="left">scaled row means</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/part_minr2.html">part_minr2()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">Minimum R-Squared</td>
<td align="left">scaled row means</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/part_pc1.html">part_pc1()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">Variance Explained (PCA)</td>
<td align="left">first principal component</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/part_icc.html">part_icc()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">Standardized Mutual Information</td>
<td align="left">scaled row means</td>
</tr>
</tbody>
</table>
<p>To apply a different partitioner, use the <code>partitioner</code> argument in <code><a href="../reference/partition.html">partition()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>prt_kmeans &lt;-<span class="st"> </span><span class="kw"><a href="../reference/partition.html">partition</a></span>(df, <span class="dt">threshold =</span> <span class="fl">.5</span>, <span class="dt">partitioner =</span> <span class="kw"><a href="../reference/part_kmeans.html">part_kmeans</a></span>())</span>
<span id="cb9-2"><a href="#cb9-2"></a>prt_kmeans</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt; Partitioner:</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">#&gt;    Director: K-Means Clusters </span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">#&gt;    Metric: Minimum Intraclass Correlation </span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">#&gt;    Reducer: Scaled Mean</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#&gt; </span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt; Reduced Variables:</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt; 4 reduced variables created from 8 observed variables</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt; </span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt; Mappings:</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt; reduced_var_1 = {block2_x1, block2_x4}</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt; reduced_var_2 = {block1_x1, block1_x4}</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt; reduced_var_3 = {block2_x2, block2_x5}</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt; reduced_var_4 = {block3_x3, block3_x5}</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt; </span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">#&gt; Minimum information:</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">#&gt; 0.514</span></span></code></pre></div>
</div>
<div id="permutation-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#permutation-tests" class="anchor"></a>Permutation tests</h2>
<p>Data sets with variables that are independent tend to reduce only at lower thresholds because too much information is lost. In this set of 10 independent variables, setting the threshold to .5 results in a partition with no reduction. The original data is returned.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># create a data.frame of 10 independent variables</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>ind_df &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_dfc</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="dv">30</span>))</span>
<span id="cb10-3"><a href="#cb10-3"></a>ind_part &lt;-<span class="st"> </span><span class="kw"><a href="../reference/partition.html">partition</a></span>(ind_df, <span class="fl">.5</span>)</span>
<span id="cb10-4"><a href="#cb10-4"></a>ind_part</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt; Partitioner:</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">#&gt;    Director: Minimum Distance (Pearson) </span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#&gt;    Metric: Intraclass Correlation </span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt;    Reducer: Scaled Mean</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt; </span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt; Reduced Variables:</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt; 0 reduced variables created from 0 observed variables</span></span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(ind_df, <span class="kw"><a href="../reference/partition_scores.html">partition_scores</a></span>(ind_part))</span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Because we can expect this, comparing partitions we fit on our data to partitions fit on independent data helps assess the reasonableness of our clusters. One easy way to compare how much data is reduced compared to if the data were completely independent is to use <code><a href="../reference/plot_partitions.html">plot_stacked_area_clusters()</a></code>, which creates partitions for a series of thresholds using both the observed data and a permuted (independent) version of the data. In general, there are many more raw features per reduced variable for the real data than the independent data; it takes a very low threshold for the permuted data to start forming clusters.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw"><a href="../reference/plot_partitions.html">plot_stacked_area_clusters</a></span>(df) <span class="op">+</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>(<span class="dv">14</span>)</span></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;"></p>
<p>partition also has a set of tools for more extensive permutation tests. <code><a href="../reference/map_partition.html">map_partition()</a></code> will fit partitions for a range of thresholds for the observed data; <code><a href="../reference/test_permutation.html">test_permutation()</a></code> will do the same but also fit partitions for a set of permuted data sets (100 by default). <code><a href="../reference/plot_permutation.html">plot_permutation()</a></code> visualizes the results, comparing information, number of clusters, or number of raw features that were reduced.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>perms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/test_permutation.html">test_permutation</a></span>(df, <span class="dt">nperm =</span> <span class="dv">10</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a>perms</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co">#&gt; # A tibble: 6 x 9</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co">#&gt;   target_info observed_info nclusters nreduced partition perm_observed_i…</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co">#&gt;         &lt;dbl&gt;         &lt;dbl&gt;     &lt;int&gt;    &lt;int&gt; &lt;list&gt;               &lt;dbl&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co">#&gt; 1         0.1         0.119         1       15 &lt;partiti…            0.111</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#&gt; 2         0.2         0.218         2       15 &lt;partiti…            0.376</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">#&gt; 3         0.3         0.395         3       15 &lt;partiti…            0.932</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt; 4         0.4         0.426         3       14 &lt;partiti…            1    </span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt; 5         0.5         0.501         4       10 &lt;partiti…            1    </span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt; 6         0.6         1             0        0 &lt;partiti…            1    </span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt; # … with 3 more variables: perm_nclusters &lt;dbl&gt;, perm_nreduced &lt;dbl&gt;,</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt; #   permutation &lt;list&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw"><a href="../reference/plot_permutation.html">plot_permutation</a></span>(perms, <span class="dt">.plot =</span> <span class="st">"nreduced"</span>) <span class="op">+</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>(<span class="dv">14</span>)</span></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
<p><code><a href="../reference/plot_partitions.html">plot_ncluster()</a></code> and <code><a href="../reference/plot_partitions.html">plot_information()</a></code>, in addition to plotting individual partitions, also plot the results of <code><a href="../reference/test_permutation.html">test_permutation()</a></code>.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-R-partition">
<p>Millstein, Joshua, Francesca Battaglin, Malcolm Barrett, Shu Cao, Wu Zhang, Sebastian Stintzing, Volker Heinemann, and Heinz-Josef Lenz. 2020. “Partition: A Surjective Mapping Approach for Dimensionality Reduction.” <em>Bioinformatics</em> 36 (3): 676–81. <a href="10.1093/bioinformatics/btz661">10.1093/bioinformatics/btz661</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction-to-the-partition-package">Introduction to the partition package</a></li>
      <li><a href="#direct-measure-reduce-and-partitioners">Direct-Measure-Reduce and Partitioners</a></li>
      <li><a href="#permutation-tests">Permutation tests</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joshua Millstein, <a href="https://malco.io">Malcolm Barrett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
